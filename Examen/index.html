<html>

<head>
  <meta charset="UTF-8">
  <script src="Examen_script.js"></script>
  <script>
    fetch('segells.json')
      .then(function (response) {
        return response.text();
      })
      .then(function (myJSON) {
        //console.log(myJSON);
        const data = JSON.parse(myJSON)
        const dota = data.segells
        const div1 = document.getElementById('div1')
        const select = document.getElementById('select')
        for (const info of dota) {
          const item = document.createElement('p')
          item.textContent = `${info.desc}`
          div1.appendChild(item)

          const option = document.createElement('option')
          option.textContent = `${info.tematica}`
          select.appendChild(option)
        }

        document.getElementById('select').addEventListener('change', (event) => {
          const padre = document.getElementById('div2')
          padre.innerHTML = ""

          //console.log(event.target.selectedOptions[0].text)
          for (const info of dota) {

            if (`${info.tematica}` == event.target.selectedOptions[0].text) {
              const item = document.createElement('p')
              item.textContent = `${info.desc} (${info.year}, ${info.comunitat})`
              padre.appendChild(item)
            }
          }
        })

      })
      .catch(function (error) {
        console.log(error)
      });
  </script>
</head>

<body>
  <h1>Nom dels Segells</h1>
  <div id="div1"></div>

  <hr>

  <h1>Selecció de la temàtica dels segells</h1>
  <select id="select" style="width: 25%;">
    <option selected disabled>Tematiques</option>
  </select>

  <div id="div2"></div>

  <hr>

  <h1>Busca Segells</h1>
  <input type="text" id="busqueda" name="fname" placeholder="Buscar Pais">

  <div id="div3"></div>
</body>

</html>